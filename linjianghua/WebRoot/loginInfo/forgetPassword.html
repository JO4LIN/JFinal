<!DOCTYPE html>
<html>
  <head>
    <title>白菜适家-珠海互联网家装-只为更好地装修-固定一线工人-忘记密码</title>
	<meta charset="utf-8">
	<meta name="keywords" content="keyword1,keyword2,keyword3">
	<meta name="description" content="this is my page">
	<meta name="content-type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE10" /> 

    
    <link type="text/css" rel="stylesheet" href="${contextPath}/css/client_login.css">
    <link rel="stylesheet" type="text/css" href="${contextPath}/css/client_validform.css">
	<script type="text/javascript" src="${contextPath}/js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="${contextPath}/js/client_head.nav.js"></script>
	
	<script type="text/javascript" src="${contextPath}/js/Validform_v5.3.2_min.js"></script>
  	<script type="text/javascript" src="${contextPath}/js/jquery.select.js" ></script>
    <script type="text/javascript">
        $(function(){
            $('select.select').select();
        });
    </script>
  </head>
  
  <body>
  <script>

function show(obj,id) {    
    var objDiv = $("#"+id+"");
    $(objDiv).css("display","block");
    $(objDiv).css("left", event.clientX);
    $(objDiv).css("top", event.clientY + 10);  
}
function hide(obj,id) {
    var objDiv = $("#"+id+"");
    $(objDiv).css("display", "none");
} 
</script>


<div id="area" style="position:absolute;display:none;color:#fff;background:#000;width:100px;text-align:center;z-index:999; opacity: 0.7;">
	<p>服务地区</p>
	<div style="background:#fff;width:110px;height:1px"></div>
	<p style="border-right: 1px solid #fff;float:left;padding:10px 10px 10px 10px">珠海</p>
	<p style="float:left;padding:10px 10px 10px 10px">中山</p>
</div>
  		<!--头部-->
	<div class="head">
	    <div class="headCenter">
	        <!--城市切换-->
	        <div class="headArea">
	        <p>房屋所在城市：
		        <select class="select" name="state" data-value="1">
		            <option value ="0">中山市</option>
		            <option value ="1" >珠海市</option>		            
	        	</select>
        	</p>	
	        </div>
	        <!--登录注册 -->        
	        <div class="headFunction"></div>
	     </div>
	     <img id="mydiv1"  alt="白菜适家" src="${listBottom[0].wechatCode}" style="width:100px; height:100px;position:absolute;display:none; z-index:999;border:1px solid silver;background:silver;">
	     
	</div>
  
  
  <!-- 导航栏 -->
    <div class="nav">
    <div class="navCenter">
    <div class="navLogo"><img style="margin:10px 0 0 0 " alt="白菜适家" src="${contextPath}/images/baicai_logo.png"></div>
	<div class="navCon">
		
		<ul class="list">
        	<li><a href="/">首页</a></li>
        	<li><a href="${contextPath}/new_house">新房套餐</a></li>
        	<li><a href="${contextPath}/old_house">旧房套餐</a></li>
        	<li><a href="${contextPath}/virtualShow">实景作品</a></li>
        	<li><a href="${contextPath}/threeD">3D体验馆</a></li>
        	<li><a target="_blank" href="http://www.baicai-home.com/bbs/forum.php?mod=forumdisplay&fid=2">工地直播</a></li>
        	<li><a target="_blank" href="${contextPath}/index_read">常见问题</a></li>
        </ul>

	</div>
    </div>
	
</div>
<div style="min-width:1200px;border-top: 1px solid #F78C0A;"></div>
<div class="login-wrapper">
	<form action="${contextPath}/userInfo/forgetPassword" method="post" class="forgetForm">
        <div class="login-box">
            <ul class="login-tabs">
                <li style="width: 50%;text-align: center;"><a href="${contextPath}/userInfo">登录</a></li>
                <li class="active" style="width: 50%;text-align: center;"><a href="javascript:void(0)">忘记密码</a></li>
            </ul>
            <div class="regPhone">
            	<img alt="白菜适家" src="${contextPath}/images/loginUser.png">
            	<input placeholder="请输入手机号" type="text" name="phone" id="j_phone" autocomplete="off" datatype="m" nullmsg="请输入手机号！" errormsg="请输入正确的手机号码！"/>
                <div class="info"><span class="Validform_checktip">请输入正确的手机号码！</span><span class="dec"><s class="dec1">&#9670;</s><s class="dec2">&#9670;</s></span></div>  
            </div> 
            
            <div class="phoneCode">
            	<div class="Code" >
            		<img alt="白菜适家" src="${contextPath}/images/loginCode.png">
            		<input style="margin-top:11.3px;" placeholder="请输入验证码" type="text" name="code" autocomplete="off" datatype="*" nullmsg="请输入验证码！" />
                    <div class="info"><span class="Validform_checktip">请输入验证码！</span><span class="dec"><s class="dec1">&#9670;</s><s class="dec2">&#9670;</s></span></div>  
            	</div>
            	<div class="getCodeBtn" id="j_getVerifyCode">获取验证码
            </div>
            </div>
            <div class="regPassword">
            	<img alt="白菜适家" src="${contextPath}/images/loginPassword.png"> 
            	<input placeholder="请输入新密码" type="password" name="userPassword" datatype="password" oncontextmenu="return false" onpaste="return false" nullmsg="请输入密码！" errormsg="请输入6~16位字母、数字或下划线！" />
                <div class="info"><span class="Validform_checktip">请输入6~16位字母、数字或下划线！</span><span class="dec"><s class="dec1">&#9670;</s><s class="dec2">&#9670;</s></span></div>   
            </div>
            <div class="regPassword">
            	<img alt="白菜适家" src="${contextPath}/images/loginPassword.png">
            	<input placeholder="请再次输入新密码" type="password"  oncontextmenu="return false" onpaste="return false" datatype="*" recheck="userPassword" nullmsg="请再次输入密码！" errormsg="您两次输入的密码不一致！" />
                <div class="info"><span class="Validform_checktip">您两次输入的密码不一致！</span><span class="dec"><s class="dec1">&#9670;</s><s class="dec2">&#9670;</s></span></div> 
            </div>
            
            <div class="registerBtn">
            	<input value="更改密码" type="submit"/>
            </div>
        
    </div>
    </form>
</div>

<script type="text/javascript" src="${contextPath}/js/client_getVerifyCode.js"></script>
<script type="text/javascript">
    
	$("#j_getVerifyCode").on("click" , function ()
	{
		var phone=$("#j_phone");
		$.ajax({ 
		        type: "POST", 		    
		        dataType: "JSON", 		     
		        async: false, 
		        url: "${contextPath}/userInfo/checkMobileRegister?phone="+phone.val(),
		        success: function(data) {
		            	if (data.result == 1) {	
		            	alert("该用户未注册");	            	  		           	 		              	     
		           }else{ 
		           
		           var getCode= getVerifyCode({	               
			callBack: function (){

	    	var phone = jQuery("#j_phone").val();	
				jQuery.ajax({
				
					url : "${contextPath}/userInfo/sendCode?phone="+phone,
					type : "post",
					dataType : "json",
					async : false,
					cache : false,
					success : function(data) {	
						
					}
				});	
		        console.log(this);
		        // alert("验证码发送成功");
		    },
		    
		    time: 60,
		    getCurrentTime: function (time){
		        console.log(time);
		        console.log(this);
		        console.log("=================================");
		    },
		    isPhone: true,
		    getPhone: function (){
		        return $("#j_phone").val();
		    },
		    
		    phoneCallBack: function (){
		        
		    },
		    timeIsUpText: "重新发送",
		    timeRunnigText: "s",
		    unabledClass: "unlabed"
		    }); 
       	  	 getCode();
      		 
	    
		            }
		        }
		    });
		   
	});
	
</script>

<script type="text/javascript">
$(function(){
    $(".forgetForm").Validform({
        tiptype:function(msg,o,cssctl){          
            if(!o.obj.is("form")){
                var objtip=o.obj.siblings().find(".Validform_checktip");
                cssctl(objtip,o.type);
                objtip.text(msg);
                
                var infoObj=o.obj.siblings(".info");
                if(o.type==2){
                    infoObj.hide();
                }else{
                    if(infoObj.is(":visible")){return;}
                    var left=o.obj.offset().left,
                        top=o.obj.offset().top;
    
                    infoObj.css({
                        left:left,
                        top:top-45
                    }).show().animate({
                        top:top-35  
                    },200);
                }
                
            }   
        },
        postonce:true,
        ajaxPost:true,
        datatype:{
        "password": /^(\w){6,16}$/
        },
        callback:function(data){
        if(data.CAllBACK_STATUS==100){
        	window.location.href="${contextPath}/userInfo"
        }
        }
    });
})
</script>
</body>
</html>
